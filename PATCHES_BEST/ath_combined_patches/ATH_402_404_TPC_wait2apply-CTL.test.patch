diff -Naur linux-hwe-4.8.0/drivers/net/wireless/ath/ath9k/eeprom_4k.c drivers/net/wireless/ath/ath9k/eeprom_4k.c
--- linux-hwe-4.8.0/drivers/net/wireless/ath/ath9k/eeprom_4k.c	2016-10-02 19:24:33.000000000 -0400
+++ drivers/net/wireless/ath/ath9k/eeprom_4k.c	2017-09-23 13:20:46.369332176 -0400
@@ -715,7 +715,8 @@
 			MAX_RATE_POWER | AR_PHY_POWER_TX_RATE_MAX_TPC_ENABLE);
 	} else {
 		/* Disable TPC */
-		REG_WRITE(ah, AR_PHY_POWER_TX_RATE_MAX, MAX_RATE_POWER);
+		REG_WRITE(ah, AR_PHY_POWER_TX_RATE_MAX,
+			MAX_RATE_POWER | AR_PHY_POWER_TX_RATE_MAX_TPC_ENABLE);
 	}
 
 	REGWRITE_BUFFER_FLUSH(ah);
diff -Naur linux-hwe-4.8.0/drivers/net/wireless/ath/ath9k/hw.c drivers/net/wireless/ath/ath9k/hw.c
--- linux-hwe-4.8.0/drivers/net/wireless/ath/ath9k/hw.c	2017-09-23 14:45:15.096259182 -0400
+++ drivers/net/wireless/ath/ath9k/hw.c	2017-09-23 13:04:11.068177516 -0400
@@ -459,7 +459,8 @@
 	ah->power_mode = ATH9K_PM_UNDEFINED;
 	ah->htc_reset_init = true;
 
-	ah->tpc_enabled = false;
+	/* ar9002 does not support TPC for the moment */
+	ah->tpc_enabled = !!AR_SREV_9300_20_OR_LATER(ah);
 
 	ah->ani_function = ATH9K_ANI_ALL;
 	if (!AR_SREV_9300_20_OR_LATER(ah))
@@ -2911,17 +2912,19 @@
 	struct ath_regulatory *reg = ath9k_hw_regulatory(ah);
 	struct ieee80211_channel *channel;
 	int chan_pwr, new_pwr;
+	u16 ctl = NO_CTL;
 
 	if (!chan)
 		return;
 
+	if (!test)
+		ctl = NO_CTL;
+
 	channel = chan->chan;
 	chan_pwr = min_t(int, channel->max_power * 2, MAX_RATE_POWER);
 	new_pwr = min_t(int, chan_pwr, reg->power_limit);
 
-	ah->eep_ops->set_txpower(ah, chan,
-				 ath9k_regd_get_ctl(reg, chan),
-				 get_antenna_gain(ah, chan), new_pwr, test);
+	ah->eep_ops->set_txpower(ah, chan, ctl, get_antenna_gain(ah, chan), new_pwr, test);
 }
 
 void ath9k_hw_set_txpowerlimit(struct ath_hw *ah, u32 limit, bool test)
diff -Naur linux-hwe-4.8.0/drivers/net/wireless/ath/Kconfig drivers/net/wireless/ath/Kconfig
--- linux-hwe-4.8.0/drivers/net/wireless/ath/Kconfig	2016-10-02 19:24:33.000000000 -0400
+++ drivers/net/wireless/ath/Kconfig	2017-09-19 15:21:07.736913323 -0400
@@ -22,6 +22,9 @@
 
 if WLAN_VENDOR_ATH
 
+config ATH_USER_REGD
+	bool "Do not enforce EEPROM regulatory restrictions"
+
 config ATH_DEBUG
 	bool "Atheros wireless debugging"
 	---help---
diff -Naur linux-hwe-4.8.0/drivers/net/wireless/ath/regd.c drivers/net/wireless/ath/regd.c
--- linux-hwe-4.8.0/drivers/net/wireless/ath/regd.c	2016-10-02 19:24:33.000000000 -0400
+++ drivers/net/wireless/ath/regd.c	2017-09-19 15:21:07.740246647 -0400
@@ -341,6 +341,10 @@
 	struct ieee80211_channel *ch;
 	unsigned int i;
 
+#ifdef CONFIG_ATH_USER_REGD
+	return;
+#endif
+
 	for (band = 0; band < NUM_NL80211_BANDS; band++) {
 		if (!wiphy->bands[band])
 			continue;
@@ -374,6 +378,10 @@
 {
 	struct ieee80211_supported_band *sband;
 
+#ifdef CONFIG_ATH_USER_REGD
+	return;
+#endif
+
 	sband = wiphy->bands[NL80211_BAND_2GHZ];
 	if (!sband)
 		return;
@@ -402,6 +410,10 @@
 	struct ieee80211_channel *ch;
 	unsigned int i;
 
+#ifdef CONFIG_ATH_USER_REGD
+	return;
+#endif
+
 	if (!wiphy->bands[NL80211_BAND_5GHZ])
 		return;
 
@@ -633,6 +645,11 @@
 	const struct ieee80211_regdomain *regd;
 
 	wiphy->reg_notifier = reg_notifier;
+
+#ifdef CONFIG_ATH_USER_REGD
+	return 0;
+#endif
+
 	wiphy->regulatory_flags |= REGULATORY_STRICT_REG |
 				   REGULATORY_CUSTOM_REG;
 
